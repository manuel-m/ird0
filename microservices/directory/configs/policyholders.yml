server:
  port: ${SERVER_PORT:8081}

directory:
  api:
    base-path: /api/policyholders
  sftp-import:
    enabled: true
    host: ${SFTP_HOST:sftp-server}
    port: ${SFTP_PORT:2222}
    username: ${SFTP_USERNAME:policyholder-importer}
    connection-timeout: 10000
    # Certificate configuration for Vault SSH CA
    certificate:
      ttl: 15m
      renewal-threshold: 5m
      principal: policyholder-importer
      vault-role: directory-service
    polling:
      fixed-delay: 120000
      initial-delay: 5000
      batch-size: 500
    local-directory: ${DIRECTORY_SFTP_IMPORT_LOCAL_DIRECTORY:../../temp/sftp-downloads}
    metadata-directory: ${DIRECTORY_SFTP_IMPORT_METADATA_DIRECTORY:../../data/sftp-metadata}
    error-handling:
      enabled: true
      error-directory: ${DIRECTORY_SFTP_IMPORT_ERROR_DIRECTORY:../../data/sftp-errors}
      dead-letter-directory: ${DIRECTORY_SFTP_IMPORT_DEAD_LETTER_DIRECTORY:../../data/sftp-failed}
    retry:
      enabled: true
      max-attempts: 3
      initial-delay: 5000
      backoff-multiplier: 1.5
      max-delay: 300000

# Vault SSH CA configuration
vault:
  ssh:
    ca:
      enabled: ${VAULT_SSH_CA_ENABLED:true}

spring:
  datasource:
    url: jdbc:postgresql://${POSTGRES_HOST:localhost}:${POSTGRES_PORT:5432}/policyholders_db
